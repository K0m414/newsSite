{"version":3,"file":"shareon.es.js","sources":["../src/shareon.js","../src/index.js"],"sourcesContent":["// prettier-ignore\n/**\n * Map of social networks to their respective URL builders.\n *\n * The `d` argument of each builder is the object with the page metadata, such\n * as page title, URL, author name, etc.\n *\n * @type {{ [network: string]: (d: {\n *   url: string,\n *   title?: string,\n *   media?: string,\n *   text?: string,\n *   via?: string,\n *   fbAppId?: string\n * }) => string}}\n */\nconst urlBuilderMap = {\n  facebook: (d) => `https://www.facebook.com/sharer/sharer.php?u=${d.url}`,\n  linkedin: (d) => `https://www.linkedin.com/sharing/share-offsite/?url=${d.url}`,\n  mastodon: (d) => `https://toot.kytta.dev/?text=${d.title}%0D%0A${d.url}${d.text ? `%0D%0A%0D%0A${d.text}` : ''}${d.via ? `%0D%0A%0D%0A${d.via}` : ''}`,\n  messenger: (d) => `https://www.facebook.com/dialog/send?app_id=${d.fbAppId}&link=${d.url}&redirect_uri=${d.url}`,\n  odnoklassniki: (d) => `https://connect.ok.ru/offer?url=${d.url}&title=${d.title}${d.media ? `&imageUrl=${d.media}` : ''}`,\n  pinterest: (d) => `https://pinterest.com/pin/create/button/?url=${d.url}&description=${d.title}${d.media ? `&media=${d.media}` : ''}`,\n  pocket: (d) => `https://getpocket.com/edit.php?url=${d.url}`,\n  reddit: (d) => `https://www.reddit.com/submit?title=${d.title}&url=${d.url}`,\n  telegram: (d) => `https://telegram.me/share/url?url=${d.url}${d.text ? `&text=${d.text}` : ''}`,\n  twitter: (d) => `https://twitter.com/intent/tweet?url=${d.url}&text=${d.title}${d.via ? `&via=${d.via}` : ''}`,\n  viber: (d) => `viber://forward?text=${d.title}%0D%0A${d.url}${d.text ? `%0D%0A%0D%0A${d.text}` : ''}`,\n  vkontakte: (d) => `https://vk.com/share.php?url=${d.url}&title=${d.title}${d.media ? `&image=${d.media}` : ''}`,\n  whatsapp: (d) => `https://wa.me/?text=${d.title}%0D%0A${d.url}${d.text ? `%0D%0A%0D%0A${d.text}` : ''}`,\n};\n\nconst openUrl = (buttonUrl) => () => {\n  window.open(buttonUrl, \"_blank\", \"noopener,noreferrer\");\n};\n\nconst init = () => {\n  const shareonContainers = document.querySelectorAll(\".shareon\");\n\n  // iterate over <div class=\"shareon\">\n  for (const container of shareonContainers) {\n    // iterate over children of <div class=\"shareon\">\n    for (const child of container.children) {\n      if (child) {\n        const classListLength = child.classList.length;\n\n        // iterate over classes of the child element\n        for (let k = 0; k < classListLength; k += 1) {\n          const cls = child.classList.item(k);\n\n          // if it's one of the networks\n          if (Object.prototype.hasOwnProperty.call(urlBuilderMap, cls)) {\n            const preset = {\n              url: encodeURIComponent(\n                child.dataset.url ||\n                  container.dataset.url ||\n                  window.location.href\n              ),\n              title: encodeURIComponent(\n                child.dataset.title || container.dataset.title || document.title\n              ),\n              media: encodeURIComponent(\n                child.dataset.media || container.dataset.media || \"\"\n              ),\n              text: encodeURIComponent(\n                child.dataset.text || container.dataset.text || \"\"\n              ),\n              via: encodeURIComponent(\n                child.dataset.via || container.dataset.via || \"\"\n              ),\n              fbAppId: encodeURIComponent(\n                child.dataset.fbAppId || container.dataset.fbAppId || \"\"\n              ),\n            };\n            const url = urlBuilderMap[cls](preset);\n\n            if (child.tagName.toLowerCase() === \"a\") {\n              child.setAttribute(\"href\", url);\n              child.setAttribute(\"rel\", \"noopener noreferrer\");\n              child.setAttribute(\"target\", \"_blank\");\n            } else {\n              child.addEventListener(\"click\", openUrl(url));\n            }\n\n            break; // once a network is detected we don't want to check further\n          }\n        }\n      }\n    }\n  }\n};\n\nexport { init };\n","import { init } from \"./shareon\";\n\nconst s = document.currentScript;\nif (s && s.hasAttribute(\"init\")) {\n  init();\n}\n\nexport { init } from \"./shareon\";\n"],"names":[],"mappings":"qBAgBA,KAAM,GAAgB,CACpB,SAAU,AAAC,GAAM,gDAAgD,EAAE,MACnE,SAAU,AAAC,GAAM,uDAAuD,EAAE,MAC1E,SAAU,AAAC,GAAM,gCAAgC,EAAE,cAAc,EAAE,MAAM,EAAE,KAAO,eAAe,EAAE,OAAS,KAAK,EAAE,IAAM,eAAe,EAAE,MAAQ,KAClJ,UAAW,AAAC,GAAM,+CAA+C,EAAE,gBAAgB,EAAE,oBAAoB,EAAE,MAC3G,cAAe,AAAC,GAAM,mCAAmC,EAAE,aAAa,EAAE,QAAQ,EAAE,MAAQ,aAAa,EAAE,QAAU,KACrH,UAAW,AAAC,GAAM,gDAAgD,EAAE,mBAAmB,EAAE,QAAQ,EAAE,MAAQ,UAAU,EAAE,QAAU,KACjI,OAAQ,AAAC,GAAM,sCAAsC,EAAE,MACvD,OAAQ,AAAC,GAAM,uCAAuC,EAAE,aAAa,EAAE,MACvE,SAAU,AAAC,GAAM,qCAAqC,EAAE,MAAM,EAAE,KAAO,SAAS,EAAE,OAAS,KAC3F,QAAS,AAAC,GAAM,wCAAwC,EAAE,YAAY,EAAE,QAAQ,EAAE,IAAM,QAAQ,EAAE,MAAQ,KAC1G,MAAO,AAAC,GAAM,wBAAwB,EAAE,cAAc,EAAE,MAAM,EAAE,KAAO,eAAe,EAAE,OAAS,KACjG,UAAW,AAAC,GAAM,gCAAgC,EAAE,aAAa,EAAE,QAAQ,EAAE,MAAQ,UAAU,EAAE,QAAU,KAC3G,SAAU,AAAC,GAAM,uBAAuB,EAAE,cAAc,EAAE,MAAM,EAAE,KAAO,eAAe,EAAE,OAAS,MAG/F,EAAU,AAAC,GAAc,IAAM,CACnC,OAAO,KAAK,EAAW,SAAU,wBAG7B,EAAO,IAAM,CACjB,KAAM,GAAoB,SAAS,iBAAiB,YAGpD,SAAW,KAAa,GAEtB,SAAW,KAAS,GAAU,SAC5B,GAAI,EAAO,CACT,KAAM,GAAkB,EAAM,UAAU,OAGxC,OAAS,GAAI,EAAG,EAAI,EAAiB,GAAK,EAAG,CAC3C,KAAM,GAAM,EAAM,UAAU,KAAK,GAGjC,GAAI,OAAO,UAAU,eAAe,KAAK,EAAe,GAAM,CAC5D,KAAM,GAAS,CACb,IAAK,mBACH,EAAM,QAAQ,KACZ,EAAU,QAAQ,KAClB,OAAO,SAAS,MAEpB,MAAO,mBACL,EAAM,QAAQ,OAAS,EAAU,QAAQ,OAAS,SAAS,OAE7D,MAAO,mBACL,EAAM,QAAQ,OAAS,EAAU,QAAQ,OAAS,IAEpD,KAAM,mBACJ,EAAM,QAAQ,MAAQ,EAAU,QAAQ,MAAQ,IAElD,IAAK,mBACH,EAAM,QAAQ,KAAO,EAAU,QAAQ,KAAO,IAEhD,QAAS,mBACP,EAAM,QAAQ,SAAW,EAAU,QAAQ,SAAW,KAGpD,EAAM,EAAc,GAAK,GAE/B,AAAI,EAAM,QAAQ,gBAAkB,IAClC,GAAM,aAAa,OAAQ,GAC3B,EAAM,aAAa,MAAO,uBAC1B,EAAM,aAAa,SAAU,WAE7B,EAAM,iBAAiB,QAAS,EAAQ,IAG1C,UClFN,EAAI,SAAS,cACnB,AAAI,GAAK,EAAE,aAAa,SACtB"}